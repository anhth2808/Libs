CREATE DATABASE QLDA
GO
USE QLDA
GO




CREATE TABLE PHONGBAN
(
	MAPB VARCHAR(5) NOT NULL,
	TENPB NVARCHAR(50) NOT NULL,
	TRUONGPHONG VARCHAR(5) NOT NULL,
	NG_NHANCHUC DATE NOT NULL,
	CONSTRAINT PK_PHONGBAN PRIMARY KEY(MAPB),
	/* CONSTRAINT FK_PHONGBAN_NHANVIEN FOREIGN KEY(TRUONGPHONG) REFERENCES NHANVIEN(MANV) */
)

CREATE TABLE NHANVIEN
(
	MANV VARCHAR(5) NOT NULL,
	HONV NVARCHAR(20) NOT NULL,
	TENLOT NVARCHAR(20)NOT NULL,
	TENNV NVARCHAR(10) NOT NULL,
	NGAYSINH DATE NOT NULL,
	DIACHI NVARCHAR(100) NOT NULL,
	PHAI VARCHAR(5) NOT NULL,
	LUONG DECIMAL(10,2) NOT NULL,
	MAPB VARCHAR(5) NOT NULL,
	
	CONSTRAINT PK_NHANVIEN PRIMARY KEY(MANV),
	CONSTRAINT FK_NHANVIEN_PHONGBAN FOREIGN KEY(MAPB) REFERENCES PHONGBAN(MAPB)
)


CREATE TABLE DDIEM_DA
(
	MAPB VARCHAR(5) NOT NULL ,
	DIADIEM NVARCHAR(100) NOT NULL,
	
	CONSTRAINT PK_DDIEM_DA PRIMARY KEY(MAPB, DIADIEM),
	CONSTRAINT FK_DDIEM_DA_PHONGBAN FOREIGN KEY(MAPB) REFERENCES PHONGBAN(MAPB)
)

CREATE TABLE DEAN
(
	MADA VARCHAR(5) NOT NULL,
	TENDA NVARCHAR(50) NOT NULL,
	DDIEM_DA NVARCHAR(100) NOT NULL,
	MAPB VARCHAR(5) NOT NULL,
	CONSTRAINT PK_DEAN PRIMARY KEY(MADA),
	CONSTRAINT FK_DEAN_MAPB FOREIGN KEY(MAPB) REFERENCES PHONGBAN(MAPB)
)


CREATE TABLE PHANCONG
(
	MANV VARCHAR(5) NOT NULL,
	MADA VARCHAR(5) NOT NULL,
	THOIGIAN DECIMAL(5,1) NOT NULL,
	
	CONSTRAINT PK_PHANCONG PRIMARY KEY(MANV, MADA),
	CONSTRAINT FK_PHANCONG_NHANVIEN FOREIGN KEY(MANV) REFERENCES NHANVIEN(MANV),
	CONSTRAINT FK_PHANCONG_DEAN FOREIGN KEY(MADA) REFERENCES DEAN(MADA),
)

CREATE TABLE THANNHAN
(
	MANV VARCHAR(5) NOT NULL,
	TENTN NVARCHAR(30) NOT NULL,
	PHAI NVARCHAR(5) NOT NULL,
	NGAYSINH DATE NOT NULL,
	QUANHE NVARCHAR(30) NOT NULL,
	CONSTRAINT PK_THANNHAN PRIMARY KEY(MANV, TENTN),
	CONSTRAINT FK_THANNHAN_NHANVIEN FOREIGN KEY(MANV) REFERENCES NHANVIEN(MANV)
)



/*************** INSERTDATA *******************/



/***************KHOA *******************/
insert PHONGBAN(MAPB, TENPB, TRUONGPHONG, NG_NHANCHUC)
values ('P1', 'QUANLY', 'NV5', 6/19/2001)